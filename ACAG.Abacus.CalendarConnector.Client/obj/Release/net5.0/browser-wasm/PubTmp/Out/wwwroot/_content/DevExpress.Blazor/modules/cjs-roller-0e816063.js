DxBlazorInternal.define("cjs-roller-0e816063.js",(function(t,e,i){t("./cjs-chunk-c5286524.js");var n=t("./cjs-dom-utils-9b1ac92c.js"),o=t("./cjs-chunk-e9e6b6d6.js"),s=t("./cjs-chunk-62a77fef.js");function r(t){return t*(2-t)}function a(t){return t/Math.abs(t)}function l(t,e,i,n){var o=null;function s(t){return o?o(t):0}function r(){o=null}function a(t,n,s){o=function(t,e,i,n,o){var s=e+i,r=0;return function(a,l){if(l)return l(t-r,a,n(a/s));if(!(a<e)){a>=s&&o&&o();var u=t*n((Math.min(a,s)-e)/i)-r;return r+=u,u}}}(n+t,s,e,i,r)}function l(t){null===o?(a(t.value,0,t.timeStamp),n(s)):o(t.timeStamp,(function(e,i){return a(t.value,e,i)}))}return t.subscribe(l),function(){o=null,t.unsubscribe(l)}}function u(t,e,i,o,r){var u,h,c,m,p,d=function(t,e,i){var n=new s.Emitter;return t.addEventListener(e,(function(t){t.preventDefault();var e=i(t);0===e||isNaN(e)||n.emit({value:e,timeStamp:t.timeStamp})}),!1),n}(t,"wheel",(function(t){return a(t.deltaY)*e}));l((u=d,h=30,c=new s.Emitter,m=0,p=1,u.subscribe((function(t){(0===m||t.timeStamp>=m||a(t.value)!==p)&&(m=t.timeStamp+h,p=a(t.value),c.emit(t))})),c),300,i,(function(t){r(new Promise((function(e,i){!function t(e,i){n.RequestAnimationFrame((function(n){var s=e(n);0!==s?(void 0!==s&&o(s),t(e,i)):i()}))}(t,e)})))}))}function h(t,e,i){var n=i(t);return n?e||n.visible.value?n:h(n,e,i):null}function c(t,e){var i,n,o=-1===e?"prevItem":"nextItem";return t[o]?t[o]:t[o]=(n=t.value+e*(i=t.collection).delta,-1===e&&-1!==i.min&&n<i.min?i.needLoop?new p(i,i.max,!1,null,t):null:1===e&&-1!==i.max&&n>i.max?i.needLoop?new p(i,i.min,!1,t,null):null:new p(i,n,!1))}var m=function(t,e,i,n,o,r){var a=this;this.collection=t,this.prevItem=o,this.nextItem=r,this.value=e,this.visible=i||new s.Subject(!0),this.selected=new s.Subject(!!n),o&&(o.nextItem=this),r&&(r.prevItem=this),this.displayText=new s.Subject(e);var l=this.collection.selectedItem;this.selected.subscribe((function(t){t&&(l.value&&l.value.selected.update(!1),l.update(a))})),this.visible.subscribe((function(t){!t&&a.selected.value&&a.getPrevious().selected.update(!0),a.collection.visibleItemsChanged.emit()}),!0)};m.prototype.getPrevious=function(t){return h(this,t,(function(t){return t.prevItem}))},m.prototype.getNext=function(t){return h(this,t,(function(t){return t.nextItem}))},m.prototype.getDisplayText=function(){return this.displayText.value||this.value};var p=function(t){function e(e,i,n,o,s){t.call(this,e,i,null,n,o,s)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.getPrevious=function(t){return c(this,-1)},e.prototype.getNext=function(t){return c(this,1)},e}(m),d=function(t){function e(e,i){t.call(this,e,i,!0)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(p),f=function(t){void 0===t&&(t=!0),this.needLoop=t,this.items=[],this.selectedItem=new s.Subject,this.visibleItemsChanged=new s.Emitter};f.createCollection=function(t,e,i){void 0===i&&(i=!0);for(var n=new f(i),o=0;o<e.length;o++)n.add(o+1,null,o+1===t).displayText.value=e[o];return n.initialize(t),n},f.createGenerator=function(t,e,i,n,o){void 0===o&&(o=!0);var s=new v(e,i,n,o);return s.initialize(t),s},f.prototype.initialize=function(t){this.items.filter((function(e){return e.value===t}))[0].selected.update(!0),this.needLoop&&(this.items[0].prevItem=this.items[this.items.length-1],this.items[this.items.length-1].nextItem=this.items[0])},f.prototype.add=function(t,e,i){var n=new m(this,t,e,i,this.items[this.items.length-1]);return this.items.push(n),n};var v=function(t){function e(e,i,n,o){t.call(this,o),this.min=e,this.max=i,this.delta=n,this.originItem=null}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialize=function(t){this.originItem=new d(this,t)},e}(f),b=function(t,e,i,n,o){this.displayTextSubscription=this.displayTextSubscription.bind(this),this.roller=i,this.prevItem=o,this.nextItem=null,this.index=e,this.elements=i.createRollerItemElements(),this.offset=e*n,this.height=n,this.position=0,this.visibleItemCount=i.visibleItemCount,o&&(o.nextItem=this),this.updateDataItem(t),this.selectItem=this.selectItem.bind(this)};function g(t,e){t.innerText=e}function I(t,e,i){var n=i(t);return Math.abs(Math.round(n.position-t.position))===e?[n].concat(I(n,e,i)):[]}function C(t,e,i){0!==t.length&&(t.shift().updateDataItem(e),C(t,i(e),i))}b.prototype.initialize=function(t){var e=this,i=Math.floor(this.visibleItemCount/2);this.elements[1].style.top=(this.index-i)*this.height+"px",t.appendChild(this.elements[1]),this.move(this.offset),this.elements[0].addEventListener("click",(function(t){n.RequestAnimationFrame(e.selectItem)}))},b.prototype.isSelected=function(){return Math.floor(this.visibleItemCount/2)*this.height===Math.round(this.position)},b.prototype.selectItem=function(t){var e=this;if(this.dataItem){var i=Math.floor(this.visibleItemCount/2);return this.roller.afterMove(x(s.Subscription.Empty,(function(t){return e.roller.move(t)}),{divisor:this.roller.itemSize.height,startTimestamp:t,endTimestamp:t+300,easing:r,frameCallback:n.RequestAnimationFrame,value:(i-this.index)*this.height-(this.position-this.offset)}))}},b.prototype.move=function(t){this.updatePosition(t);var e=this.position-this.offset;this.elements.forEach((function(t){return t.style.transform="matrix(1, 0, 0, 1, 0, "+e+")"}))},b.prototype.updatePosition=function(t){this.position+=t,this.position>this.visibleItemCount*this.height?(this.position-=(this.visibleItemCount+1)*this.height,this.updateDataItem(this.nextItem.dataItem?this.nextItem.dataItem.getPrevious():null)):this.position<-1*this.height&&(this.position+=(this.visibleItemCount+1)*this.height,this.updateDataItem(this.prevItem.dataItem?this.prevItem.dataItem.getNext():null))},b.prototype.updateDataItem=function(t){this.dataItem!==t&&(this.dataItem&&this.dataItem.displayText.unsubscribe(this.displayTextSubscription),this.dataItem=t,this.dataItem?this.dataItem.displayText.subscribe(this.displayTextSubscription):this.displayTextSubscription(""))},b.prototype.displayTextSubscription=function(t){this.elements.forEach((function(e){return g(e,t)}))},b.prototype.raiseChanges=function(){this.isSelected()&&this.dataItem.selected.update(!0)};var y=function(t,e,i,n,o,s){this.itemCollection=t,this.visibleItemCount=e,this.itemContainers=[],this.itemSize=n,this.caption=o,this.longestVisibleDisplayText=s,this.needLoop=t.needLoop,this.container=i,this.rollerElement=null,this.rollerContainer=null,this.move=this.move.bind(this),this.moveReversed=this.moveReversed.bind(this),this.afterMove=this.afterMove.bind(this)};function x(t,e,i){return new Promise((function(n,o){function s(){t.unsubscribe(s),o()}t.subscribe(s,!0);var r=0,a=i.frameCallback;a((function o(l){if(l<i.endTimestamp){var u=i.easing((l-i.startTimestamp)/(i.endTimestamp-i.startTimestamp)),h=i.value*u-r;e(h),r+=h,a(o)}else t.unsubscribe(s),e(i.value-r),n()}))}))}function w(t,e,i,n,o,s){var a,l,u,h,c=1,m=i.accelerationTimeFrame||300;function p(t){l=0,u=t,c=1}t.subscribe((function(d){s((function(f){h||(h=!0,p(f),o(new Promise((function(o,a){e.subscribe((function a(u){e.unsubscribe(a),x(t,n,function(t){var e=Math.abs(l%i.divisor);return{value:(i.divisor-e)*Math.sign(l),endTimestamp:t+300,startTimestamp:t,easing:r,frameCallback:s}}(u)).then((function(){h=!1,o()})).catch((function(){e.subscribe(a)})).finally(p)}))})))),n(function(t,e){return(e*=c)>=a&&t-u<=m&&(c=Math.min(2,1.2*c)),l+=e,a=e,u=t,e}(f,d))}))}))}function S(t){return t.value%4==0&&t.value%100!=0||t.value%400==0}function z(t){return 2!==t.value}function T(t){return-1!==[1,3,5,7,8,10,12].indexOf(t.value)}y.prototype.initialize=function(){var t=this;this.initializeRollerElements();for(var e=[this.itemCollection.selectedItem.value];e.length<this.visibleItemCount;)e.splice(0,0,e[0]?e[0].getPrevious():null),e.push(e[e.length-1]?e[e.length-1].getNext():null);e.push(e[e.length-1]?e[e.length-1].getNext():null);for(var i=0;i<e.length;i++)this.itemContainers.push(new b(e[i],i,this,this.itemSize.height,this.itemContainers[this.itemContainers.length-1]));this.longestVisibleDisplayText&&g(this.createRollerItemElement("roller-item expander"),this.longestVisibleDisplayText);var a=this.createRollerItemElement("roller-after");this.itemContainers[0].prevItem=this.itemContainers[this.itemContainers.length-1],this.itemContainers[this.itemContainers.length-1].nextItem=this.itemContainers[0];for(var l=0;l<this.itemContainers.length;l++)this.itemContainers[l].initialize(a);this.itemCollection.selectedItem.subscribe((function(){return t.updateVisibleDataItems()}),!0),this.itemCollection.visibleItemsChanged.subscribe((function(){return t.updateVisibleDataItems()}),!0),u(this.rollerElement,this.itemSize.height,r,this.moveReversed,this.afterMove),function(t,e,i,o){var r=new s.Emitter,a=new s.Emitter,l=0;t.addEventListener("touchstart",(function(t){l=t.touches[0].clientY}),!1),t.addEventListener("touchend",(function(t){l=0,n.RequestAnimationFrame((function(t){return a.emit(t)}))}),!1),t.addEventListener("touchmove",(function(t){t.preventDefault();var e=t.changedTouches[0].clientY;r.emit(e-l),l=e}),!1),w(r,a,{divisor:e},i,o,n.RequestAnimationFrame)}(this.rollerElement,this.itemSize.height,this.move,this.afterMove),this.rollerContainer.addEventListener("keydown",(function(e){var i=null;e.keyCode===o.Key.Up?i=t.itemCollection.selectedItem.value.getPrevious():e.keyCode===o.Key.Down&&(i=t.itemCollection.selectedItem.value.getNext()),i&&(e.preventDefault(),i.selected.update(!0))}))},y.prototype.initializeRollerElements=function(){var t=this.rollerContainer=document.createElement("SPAN");t.className="roller-container",t.style.minWidth=this.itemSize.width;var e=document.createElement("SPAN");e.innerText=this.caption,e.className="roller-title",t.appendChild(e);var i=this.rollerElement=document.createElement("A");i.href="javascript:;",i.className="roller",i.style.height=this.itemSize.height*this.visibleItemCount+"px",t.appendChild(i),this.container&&this.container.appendChild(t)},y.prototype.updateVisibleDataItems=function(){var t=this.itemContainers.filter((function(t){return t.isSelected()}))[0];if(t){var e=I(t,this.itemSize.height,(function(t){return t.prevItem})),i=I(t,this.itemSize.height,(function(t){return t.nextItem})),n=this.itemCollection.selectedItem.value;t.updateDataItem(n),C(e.concat([]),n.getPrevious(),(function(t){return t?t.getPrevious():null})),C(i.concat([]),n.getNext(),(function(t){return t?t.getNext():null}))}},y.prototype.createRollerItemElement=function(t){var e=document.createElement("SPAN");return e.className=t||"roller-item",this.rollerElement.appendChild(e),e},y.prototype.createRollerItemElements=function(){var t=this.createRollerItemElement();return[t,t.cloneNode()]},y.prototype.moveReversed=function(t){this.move(0-t)},y.prototype.move=function(t){if(0!==t){var e=Math.sign(t),i=this.itemContainers.length-1,n=-1===e?i:0,o=(-1===e?0:i)+e;if(!this.needLoop){if(1===e)for(var s=Math.floor(this.visibleItemCount/2)*this.itemSize.height,r=n;r!==o;r+=e)!this.itemContainers[r].dataItem&&this.itemContainers[r].position+this.itemSize.height-s<=0&&this.itemContainers[r].position+this.itemSize.height+t-s>0&&(t=Math.min(s-(this.itemContainers[r].position+this.itemSize.height),t));else for(var a=(Math.floor(this.visibleItemCount/2)+1)*this.itemSize.height,l=n;l!==o;l+=e)!this.itemContainers[l].dataItem&&this.itemContainers[l].position-a>=0&&this.itemContainers[l].position+t-a<0&&(t=Math.max(a-this.itemContainers[l].position,t));if(0===t)return}for(var u=n;u!==o;u+=e)this.itemContainers[u].move(t)}},y.prototype.afterMove=function(t){var e=this;return t.then((function(){return Promise.resolve(e.itemContainers.forEach((function(t){return t.raiseChanges()})))}))};var E=0,M=1,D=2,j=3,k=4,R=5;function N(t,e,i,n,o,s){var r=t.add(e,i,n);o.length>0&&s.subscribe((function(t){var i=o[P(t[1].value,t[0].value,e)];r.displayText.update(e+" "+i)}))}function P(t,e,i){return new Date(t,e-1,i).getDay()}function A(t){return t&&t.length?" "+t.concat([]).sort((function(t,e){return e.length-t.length}))[0]:""}var L=1,_=2,F=0,G=1,V=2,Y=3;function q(t,e,i){if(e){var n=e.time;if(n){var o=e.twelveHourFormat,s=o?n.hours%12:n.hours;o&&0===s&&(s=12);var r=n.minutes,a=n.seconds,l=n.hours>=12?_:L,u=f.createGenerator(a,0,59,1),h=f.createGenerator(r,0,59,1),c=o?f.createGenerator(s,1,12,1):f.createGenerator(s,0,23,1),m=null;e.ampmDesignators&&e.ampmDesignators[0]&&e.ampmDesignators[1]&&(m=f.createCollection(l,e.ampmDesignators,!1));var p=document.createDocumentFragment(),d=document.createElement("STYLE");return d.type="text/css",d.innerText=".roller { height: 180px; } .roller-item, .roller-after { height: 36px; } .roller-item, .roller-title { color: "+window.getComputedStyle(t).color+" !important; } .roller-after { background-color: "+window.getComputedStyle(t.parentNode.parentNode).backgroundColor+";}",p.appendChild(d),e.items.forEach((function(t){switch(t.type){case F:new y(c,5,p,{width:"",height:36},"Hour","15").initialize();break;case G:new y(h,5,p,{width:"",height:36},"Minute","55").initialize();break;case V:new y(u,5,p,{width:"",height:36},"Second","55").initialize();break;case Y:if(m)new y(m,5,p,{width:"",height:36},"AM/PM","AM").initialize()}})),c.selectedItem.subscribe(v((function(t){s=t.value}))),h.selectedItem.subscribe(v((function(t){r=t.value}))),u.selectedItem.subscribe(v((function(t){a=t.value}))),m&&m.selectedItem.subscribe(v((function(t){l=t.value}))),O.set(t,new U(c,h,u,m)),t.appendChild(p),Promise.resolve()}}function v(t){return function(e){t(e),i.invokeMethodAsync("UpdateDateTime",[s,r,a,l])}}}var O=new WeakMap,U=function(t,e,i,n){this.hoursCollection=t,this.minutesCollection=e,this.secondsCollection=i,this.AMPMCollection=n};U.prototype.update=function(t){if(this.AMPMCollection){var e=this.AMPMCollection?t.hours%12:t.hours;this.hoursCollection.initialize(e=0===e?12:e),this.AMPMCollection.initialize(t.hours>=12?_:L)}else this.hoursCollection.initialize(t.hours);this.minutesCollection.initialize(t.minutes),this.secondsCollection.initialize(t.seconds)};var W=function(t,e,i){this.yearsCollection=t,this.monthsCollection=e,this.daysCollection=i};function H(t,e){O.has(t)&&O.get(t).update(e)}W.prototype.update=function(t){var e=t.filter((function(t){return t.type===M||t.type===D||t.type===E}))[0],i=t.filter((function(t){return t.type===j||t.type===k}))[0],n=t.filter((function(t){return t.type===R}))[0];this.yearsCollection.initialize(n.value),this.monthsCollection.initialize(i.value),this.daysCollection.initialize(e.value)};var K={initializeDateRoller:function(t,e,i,n,o){var s=e.items.filter((function(t){return t.type===M||t.type===D||t.type===E}))[0],r=e.items.filter((function(t){return t.type===j||t.type===k}))[0],a=e.items.filter((function(t){return t.type===R}))[0],l=e.monthNames||[],u=e.dayNames||[];s=void 0!==s?s.value:1,void 0===r?(l=["","","","","","","","","","","",""],r=i):r=r.value;for(var h=f.createGenerator(a=void 0===a?n:a.value,-1,-1,1),c=f.createCollection(r,l),m=c.selectedItem.asTrigger(z),p={29:h.selectedItem.asTrigger(S).or(m),30:m,31:c.selectedItem.asTrigger(T)},d=c.selectedItem.join(h.selectedItem),v=new f,b=1;b<=31;b++)N(v,b,p[b],b===s,u,d);v.initialize(s);var g=["25"+A(u),A(l),"0000"].reduce((function(t,e){return t.length>e.length?t:e})),I=document.createDocumentFragment(),C=document.createElement("STYLE");function x(t){return function(e){t(e),o.invokeMethodAsync("UpdateDateTime",[s,r,a])}}return C.type="text/css",C.innerText=".roller { height: 180px; } .roller-item, .roller-after { height: 36px; } .roller-item, .roller-title { color: "+window.getComputedStyle(t).color+" !important; } .roller-after { background-color: "+window.getComputedStyle(t.parentNode.parentNode).backgroundColor+";}",I.appendChild(C),e.items.forEach((function(t){switch(t.type){case E:case D:case M:new y(v,5,I,{width:"",height:36},"Day",g).initialize();break;case k:case j:new y(c,5,I,{width:"",height:36},"Month",g).initialize();break;case R:new y(h,5,I,{width:"",height:36},"Year",g).initialize()}})),t.appendChild(I),v.selectedItem.subscribe(x((function(t){s=t.value}))),c.selectedItem.subscribe(x((function(t){r=t.value}))),h.selectedItem.subscribe(x((function(t){a=t.value}))),O.set(t,new W(h,c,v)),Promise.resolve()},initializeTimeRoller:q,updateRoller:H};i.Roller=y,i.RollerItem=m,i.RollerItemCollection=f,i.attachInputSource=w,i.default=K,i.getDayOfWeek=P,i.initializeTimeRoller=q,i.updateRoller=H}),["cjs-chunk-c5286524.js","cjs-dom-utils-9b1ac92c.js","cjs-chunk-e9e6b6d6.js","cjs-chunk-62a77fef.js"]);
